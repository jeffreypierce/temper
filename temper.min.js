(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t={}.hasOwnProperty,u=function(a,b){function c(){this.constructor=a}for(var d in b)t.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};s={type:function(a){var b;return void 0===a||null===a?!1:(b={"[object Number]":"number","[object String]":"string","[object Array]":"array","[object Object]":"object"},b[toString.call(a)])},normalize:function(a,b){var c;return null==b&&(b=3),c=Math.pow(10,b),Math.round(a*c)/c},list:function(a,b){var c,d,e,f,g,h;if(a&&this[a])return this[a];if(b){for(g=[],e=0,f=this.length;f>e;e++)d=this[e],g.push(d);return g}h=[];for(c in this)h.push(c);return h},centOffset:function(a,b){return Math.round(1200*Math.log(a/b)/Math.log(2))},ratioFromCents:function(a){return Math.pow(2,a/100/12)},stepRatio:Math.log(Math.pow(2,1/12))},m=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],n=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],i=["C","F","Bb","Eb","Ab","Db","Gb","Cb"],l={C:"B#",E:"E#",F:"E3",B:"Cb"},d=function(){function a(a,b){var c,d,e=this;"undefined"!=typeof window&&null!==window&&(this._play=b.play,this._pluck=b.pluck),this.rootFrequency=b.rootFrequency(),this.temperament=b._temperament,d=function(b){var c;if(c=/([A-Ga-g])([b#]?)(\d+)/.exec(b),null!=c)return e.octave=parseInt(c[3],10),e.accidental=c[2],e.letter=c[1].toUpperCase(),null!=e.accidental&&(e.letter+=e.accidental),e.frequency=s.normalize(e.getFrequencyFromNoteLetter()),e.name=a;throw new TypeError('Note name "'+b+'" is not a valid argument')},c=function(a){if(3e4>a&&a>0)return e.octave=Math.floor(Math.log(a/e.rootFrequency)/Math.log(2)),e.frequency=s.normalize(a),e.letter=e.getNoteLetterFromFrequency(),e.name=e.letter+e.octave.toString(),e.accidental=null!=e.name.match(/[b#]/)?e.name.match(/[b#]/):"";throw new RangeError('Frequency "'+a+'" is not valid')},"string"===s.type(a)&&d(a),"number"===s.type(a)&&c(a),this.midiNote=Math.round(12*Math.log(this.frequency/440)/Math.log(2)+69)}return a.prototype.getNoteArray=function(a){return i.indexOf(a)>-1?m:n},a.prototype.getNoteLetterFromFrequency=function(){var a,b,c;return a=Math.log(this.frequency/this.referenceFrequency()),c=Math.round(a/s.stepRatio),12===c&&(this.octave+=1),b=this.getNoteArray(this.letter),b[c%12]},a.prototype.getFrequencyFromNoteLetter=function(){var a,b,c;return a=this.getNoteArray(this.letter),b=a.indexOf(this.letter),c=s.ratioFromCents(r[this.temperament][b]),s.normalize(c*this.referenceFrequency())},a.prototype.referenceFrequency=function(){return this.rootFrequency*Math.pow(2,this.octave)},a}(),"undefined"!=typeof window&&null!==window&&(d.prototype.play=function(a){return this._play.call(this,a)},d.prototype.pluck=function(a){return this._pluck.call(this,a)}),j=["U","m2","M2","m3","M3","P4","d5","P5","m6","M6","m7","M7","O"],k=["unison","minor second","major second","minor third","major third","perfect fourth","diminished fifth","perfect fifth","minor sixth","major sixth","minor seventh","major seventh","octave"],c=function(a){function b(a,c,d,e){var f,g,h=this;this.direction=null!=d?d:"up",this.octave=null!=e?e:"",this.tonic=c.tonic,g=function(a){var b,c,d,e,f;return h.intervalName=a,f=j.indexOf(a),e=h.tonic.getNoteArray(),d=h.tonic.octave,"up"===h.direction?(c=e.indexOf(h.tonic.letter)+f,c>=12&&(d+=1)):"down"===h.direction&&(c=e.indexOf(h.tonic.letter)-f,0>c&&(d-=1,c+=12)),b=e[c%12]+d.toString()},f=function(){var a,b,c,d,e;return d=h.getNoteArray.call(h.tonic),a=h.getNoteArray(),e=d.indexOf(h.tonic.letter),b=a.indexOf(h.letter),h.direction="down",c=(12-b+e)%12,(h.tonic.octave<h.octave||h.tonic.octave===h.octave&&b>e)&&(e>b&&(b+=12),c=b-e,h.direction="up"),j[c]},j.indexOf(a)>-1&&(a=g(a)),b.__super__.constructor.call(this,a,c),s.type(this.intervalName)||(this.intervalName=f()),this.tonic.name===this.name&&(this.direction="-"),this.frequencies=[this.tonic.frequency,this.frequency],this.names=[this.tonic.name,this.name],this.midiNotes=[this.tonic.midiNote,this.midiNote]}return u(b,a),b}(d),"undefined"!=typeof window&&null!==window&&(c.prototype.play=function(a){return this._play.call(this,a,2),this._play.call(this.tonic,a,2)},c.prototype.pluck=function(a){return this._pluck.call(this,a,2),this._pluck.call(this.tonic,a,2)}),b=function(){function a(a,b,d){var e,f,g,h,i,j,k=this;for(this.tonic=b.tonic,this.notes=[],this.name="unknown","undefined"!=typeof window&&null!==window&&(this._play=b.play,this._pluck=b.pluck),g=function(a){var e,f,g,h,i;if(d[a]){for(k.name=a,h=d[a],i=[],f=0,g=h.length;g>f;f++)e=h[f],i.push(k.notes.push(new c(e,b)));return i}throw new TypeError('Name "'+a+'" is not a valid argument')},f=function(a){var e,f,g,h,i,j,l,m,n;for(i=[],e=l=0,m=a.length;m>l;e=++l)h=a[e],f=new c(h,b),i.push(f.intervalName),k.notes.push(f);n=[];for(g in d){if(j=d[g],JSON.stringify(j)===JSON.stringify(i)){k.name=g;break}n.push(void 0)}return n},"string"===s.type(a)&&g(a),"array"===s.type(a)&&f(a),this.frequencies=[this.tonic.frequency],this.names=[this.tonic.name],this.midiNotes=[this.tonic.midiNote],j=this.notes,h=0,i=j.length;i>h;h++)e=j[h],this.frequencies.push(e.frequency),this.names.push(e.name),this.midiNotes.push(e.midiNote)}return a}(),g={maj:["M3","P5"],maj6:["M3","P5","M6"],maj7:["M3","P5","M7"],majb6:["M3","P5","m6"],majb7:["M3","P5","m7"],min6:["m3","P5","m6"],min7:["m3","P5","m7"],minM7:["m3","P5","M7"],min:["m3","P5"],aug:["M3","m6"],aug7:["M3","m6","M7"],dim:["m3","d5"],dim7:["m3","d5","M6"],sus4:["P4","P5"],sus2:["M2","P5"],dream:["P4","d5","P5"]},a=function(a){function b(a,c){b.__super__.constructor.call(this,a,c,g)}return u(b,a),b}(b),"undefined"!=typeof window&&null!==window&&(a.prototype.play=function(a){var b,c,d,e,f,g=this;for(this._play.call(this.tonic,a,this.notes.length+1),e=this.notes,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(function(b){return g._play.call(b,a,g.notes.length+1)}(b));return f},a.prototype.pluck=function(a){var b,c,d,e,f,g=this;for(this._pluck.call(this.tonic,a,this.notes.length+1),e=this.notes,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(function(b){return g._pluck.call(b,a,g.notes.length+1)}(b));return f}),p={Major:["M2","M3","P4","P5","M6","M7","O"],Minor:["M2","m3","P4","P5","m6","m7","O"],Chromatic:["m2","M2","m3","M3","P4","d5","P5","m6","M6","m7","M7","O"],Ionian:["M2","M3","P4","P5","M6","M7","O"],Dorian:["M2","m3","P4","P5","M6","m7","O"],Phrygian:["m2","m3","P4","P5","m6","m7","O"],Lydian:["M2","M3","A4","P5","M6","M7","O"],Mixolydian:["M2","M3","P4","P5","M6","m7","O"],Aeolian:["M2","m3","P4","P5","m6","m7","O"],Locrian:["m2","m3","P4","d5","m6","m7","O"]},e=function(a){function b(a,c){b.__super__.constructor.call(this,chord,c,p)}return u(b,a),b}(b),"undefined"!=typeof window&&null!==window&&(e.prototype.play=function(a){var b,c,d,e,f,g,h=this;for(null==a&&(a=2),this._play.call(this.tonic,a,2),f=this.notes,g=[],b=d=0,e=f.length;e>d;b=++d)c=f[b],g.push(function(c){return setTimeout(function(){return h._play.call(c,a,2)},1e3*a/2*(b+1))}(c));return g},e.prototype.pluck=function(a){var b,c,d,e,f,g,h=this;for(null==a&&(a=2),this._pluck.call(this.tonic,a,2),f=this.notes,g=[],b=d=0,e=f.length;e>d;b=++d)c=f[b],g.push(function(c){return setTimeout(function(){return h._pluck.call(c,a,2)},1e3*a/2*(b+1))}(c));return g}),r={Equal:[0,100,200,300,400,500,600,700,800,900,1e3,1100,1200],Pythagorean:[0,113.69,203.91,294.13,407.82,498.04,611.73,701.95,815.64,905.87,996.09,1109.78,120],Natural:[0,111.74,203.91,315.64,386.31,498.05,603,702,813.69,884.36,1017.6,1088.27,1200],"1/3 comma Meantone":[0,63.5,189.57,315.64,379.14,505.21,568.72,694.79,758.29,884.36,1010.43,1073.93,1200],"2/7 comma Meantone":[0,70.67,191.62,312.57,383.24,504.19,574.86,695.81,766.48,887.43,1008.38,1079.05,1200],"1/4 comma Meantone":[0,76.05,193.16,310.26,386.31,503.42,579.47,696.58,772.63,889.74,1006.84,1082.89,1200],"1/5 comma Meantone":[0,83.58,195.31,307.04,390.61,502.35,585.92,697.65,781.23,892.96,1004.69,1088.27,1200],"1/6 comma Meantone":[0,88.59,196.74,304.89,393.48,501.63,590.22,698.37,786.96,895.11,1003.26,1091.85,1200],"1/8 comma Meantone":[0,94.87,198.53,302.2,397.07,500.73,595.6,699.27,794.13,897.8,1001.47,1096.33,1200],Ordinaire:[0,86.81,193.16,296.09,386.31,503.42,584.85,696.58,788.76,889.74,1005.22,1082.89,1200],"Werckmeister III":[0,90.22,192.18,294.14,390.23,498.05,588.27,696.09,792.18,888.27,996.09,1092.18,1200],Kirnberger:[0,91,192,296,387,498,591,696,792,890,996,1092,1200],"Kirnberger III":[0,90.18,193.16,294.13,386.31,498.04,590.22,696.58,792.18,889.74,996.09,1088.27,1200],Young:[0,93.69,195.91,298.13,391.82,502.04,591.73,697.96,796.18,893.87,1000.09,1089.78,1200]},r["1/11 comma Meantone"]=r.Equal,r.Salinas=r["1/3 comma Meantone"],r.Aaron=r["1/4 comma Meantone"],r.Silbermann=r["1/5 comma Meantone"],f=function(){function b(a,b,c){this.tuningFrequency=null!=b?b:440,this._temperament=null!=c?c:"Equal",null!=a&&(this.tonic=new d(a,this))}return b.prototype.rootFrequency=function(){var a;return a=s.ratioFromCents(r[this._temperament][9]),this.tuningFrequency/Math.pow(2,4)/a},b.prototype.note=function(a){return null!=a?this.tonic=new d(a,this):this.tonic},b.prototype.temperament=function(a){return null!=a?(r[a]&&(this._temperament=a,this.note(this.tonic.name),this._interval&&this.interval(this._interval.name)),this):this._temperament},b.prototype.interval=function(a,b,d){return null!=a?this._interval=new c(a,this,b,d):this._interval},b.prototype.scale=function(a){return null!=a?this._scale=new e(a,this):this._scale},b.prototype.chord=function(b){return null!=b?this._chord=new a(b,this):this._chord},b}(),o=this,q=function(a,b,c){return new f(a,b,c)},q.note=function(a){return new f(a)},q.chords=function(a){return s.list.call(g,a)},q.intervals=function(a){return s.list.call(j,a,!0)},q.temperaments=function(a){return s.list.call(r,a)},q.centOffset=s.centOffset,"undefined"!=typeof exports?module.exports=q:o.temper=q,"undefined"!=typeof window&&null!==window&&(window.AudioContext=window.AudioContext||window.webkitAudioContext,h=new AudioContext,f.prototype.play=function(a,b){var c,d,e,f,g;return null==a&&(a=2),null==b&&(b=1),g=.9/b,c=h.currentTime,d=c+a,e=h.createOscillator(),e.type="sine",e.frequency.value=this.frequency?this.frequency:this._note.frequency,f=h.createGain(),f.gain.setValueAtTime(0,c),f.gain.linearRampToValueAtTime(g,d-.5*a),f.gain.linearRampToValueAtTime(0,d),e.connect(f),f.connect(h.destination),e.start(c),e.stop(d),this},f.prototype.pluck=function(a,b){var c,d,e,f,g,i,j,k,l;return null==a&&(a=2),null==b&&(b=1),k=.9/b,d=h.currentTime,e=d+a,l=function(a){var b,c,d,e,f,g,i,j,k;for(f=[],j=new Float32Array(h.sampleRate),g=Math.floor(h.sampleRate/a),d=0;g>d;)f[d]=2*Math.random()-1,d++;for(i=0,k=function(){var a,b;return a=f.shift(),b=(a+i)/2,i=b,f.push(b),b},b=.5*Math.random()+.4,e=0;e<h.sampleRate;)j[e]=k(),c=b-e/h.sampleRate*b,j[e]=j[e]*c,e++;return j},j=h.createGain(),g=h.createBufferSource(),f=this.frequency?this.frequency:this._note.frequency,i=l(f),c=h.createBuffer(1,i.length,h.sampleRate),c.getChannelData(0).set(i),g.buffer=c,g.connect(j),j.connect(h.destination),j.gain.value=k,g.start(d),g.stop(e),this})}).call(this);